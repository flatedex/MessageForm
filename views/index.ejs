<!DOCTYPE html>

<head>
    <style>
        .modal-button {
            background-color: #01BAB3;
            color: white;
            padding: 12px 16px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            width: 15%;
        }

        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 100px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        .close {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <form id="add-canal" class="form_addperson_style" action="/sms" method="post">
            <select id="selector">
                <% if(toRender){ %>
                    <% for(let i=0; i < toRender.length; i++){ %>
                        <option>
                            <%=toRender[i] %>
                        </option>
                        <% } %>
                            <% } %>
            </select>
            <p id="name">Добавление сообщения</p>
            <textarea id="message-field" name="message" placeholder="Введите сообщение"></textarea>
            <div class="options">
                <button id="add-button">Добавить кнопку</button>
                <input id="inline-checkbox" type="checkbox">
                <div class="button-names"></div>
            </div>

            <button id="save-to-db" class="save" type="submit" hidden="hidden">Save to database</button>
            <button id="send-message" class="send" type="submit">Send message</button>
        </form>
    </div>
</body>

<script defer>
    let counter = 0;
    let selector = document.querySelector("#selector");
    selector.addEventListener("change", function () {
        let options = document.querySelector(".options");
        if (selector.value != "SMS") {
            options.style.display = "block";
        } else {
            let names = document.querySelector(".button-names");
            while(names.firstChild){
                names.removeChild(names.firstChild);
            }
            options.style.display = "none";
            let checkbox = document.querySelector("#inline-checkbox");
        }
    })
    let addBtn = document.getElementById("add-button");
    addBtn.onclick = function (e) {
        e.preventDefault();
        let input = document.createElement('input');
        input.type = "text";
        input.id = `button-text-${counter}`;
        counter++;
        let form = document.querySelector(".button-names");
        form.append(input);
    }
    let saveToDB = document.getElementById("save-to-db");
    saveToDB.onclick = function (e) {
        e.preventDefault();
        //send form to save
    }
</script>

<footer>
</footer>